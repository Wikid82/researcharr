<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="researcharr contributors" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Configuration Reference - researcharr</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/css/researcharr.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Configuration Reference";
        var mkdocs_page_input_path = "CONFIGURATION.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> researcharr
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">researcharr documentation â€” Day One</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../API/">ResearchArr API (v1)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Backup-and-Recovery/">Backup and Recovery Procedures</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CI-and-Development/">CI and Development</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../CLI-Usage/">CLI Usage Guide</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Configuration Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#configuration-structure">Configuration Structure</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#scheduling-configuration">Scheduling Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#scheduling">scheduling</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#backup-configuration">Backup Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#backups">backups</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example_1">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#database-configuration">Database Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#database">database</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example_2">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#storage-configuration">Storage Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#storage">storage</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#example_3">Example</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#complete-configuration-example">Complete Configuration Example</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#validation">Validation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#environment-variables">Environment Variables</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration-precedence">Configuration Precedence</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#dynamic-configuration">Dynamic Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#schema-documentation">Schema Documentation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Changelog/">Changelog</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Contributing/">Contributing to researcharr</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Coverage-CI-Local-Differences/">Coverage Differences: CI vs Local</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Coverage-Gutters-Example-Comparison/">Coverage Gutters Example Structure</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Coverage-Gutters-Quick-Reference/">Coverage Gutters - Quick Reference Card</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Coverage-Gutters-Quick-Start/">Coverage Gutters - Visual Quick Start Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Coverage-Gutters-Setup/">Coverage Gutters Setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../DEV/">DEV</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Deployment-and-Resources/">Deployment and Resource Recommendations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Environment-Variables/">Environment variables</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../FAQ/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Getting-Started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Health-and-Metrics/">Health and Metrics Endpoints</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Integrations/">Integrations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Logs/">Logs and Live Streaming</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Packaging-and-Distribution/">Packaging and Distribution</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Plugins/">Plugins and instance configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Recent-Changes/">Recent Changes</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Renovate-Configuration/">Renovate Bot Configuration Guide</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Roadmap/">Roadmap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../SERVICES_ARCHITECTURE/">Services Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Status-and-Warnings/">System status warnings and how to fix them</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Versioning/">Versioning & Releases</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">researcharr</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">Configuration Reference</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="configuration-reference">Configuration Reference</h1>
<p>This document describes all configuration options for Researcharr services.</p>
<h2 id="configuration-structure">Configuration Structure</h2>
<p>Configuration can be loaded from YAML, JSON, or environment variables. The configuration validator ensures all values are within acceptable ranges.</p>
<h2 id="scheduling-configuration">Scheduling Configuration</h2>
<p>Controls the APScheduler-based task scheduler.</p>
<h3 id="scheduling"><code>scheduling</code></h3>
<p><strong>scheduling.timezone</strong> (string)
- Description: Timezone for scheduled tasks
- Default: <code>"UTC"</code>
- Examples: <code>"America/New_York"</code>, <code>"Europe/London"</code>, <code>"Asia/Tokyo"</code></p>
<p><strong>scheduling.max_instances</strong> (integer)
- Description: Maximum concurrent job instances
- Default: <code>3</code>
- Minimum: <code>1</code>
- Maximum: <code>10</code>
- Note: Prevents jobs from piling up if execution takes longer than interval</p>
<p><strong>scheduling.coalesce</strong> (boolean)
- Description: Coalesce missed runs into single execution
- Default: <code>true</code>
- Note: If true, multiple missed runs execute as one; if false, all missed runs execute</p>
<h3 id="example">Example</h3>
<pre><code class="language-yaml">scheduling:
  timezone: &quot;America/New_York&quot;
  max_instances: 5
  coalesce: true
</code></pre>
<h2 id="backup-configuration">Backup Configuration</h2>
<p>Controls backup creation, retention, and monitoring.</p>
<h3 id="backups"><code>backups</code></h3>
<p><strong>backups.enabled</strong> (boolean)
- Description: Enable backup monitoring
- Default: <code>true</code></p>
<p><strong>backups.retain_count</strong> (integer)
- Description: Number of backups to retain
- Default: <code>5</code>
- Minimum: <code>1</code>
- Maximum: <code>100</code>
- Note: Older backups are automatically deleted</p>
<p><strong>backups.max_age_days</strong> (integer)
- Description: Maximum age of backups in days
- Default: <code>30</code>
- Minimum: <code>1</code>
- Maximum: <code>365</code>
- Note: Backups older than this trigger warnings</p>
<p><strong>backups.check_interval</strong> (integer)
- Description: Backup check interval in seconds
- Default: <code>3600</code> (1 hour)
- Minimum: <code>60</code> (1 minute)
- Maximum: <code>86400</code> (1 day)</p>
<h3 id="example_1">Example</h3>
<pre><code class="language-yaml">backups:
  enabled: true
  retain_count: 10
  max_age_days: 7
  check_interval: 3600
</code></pre>
<h2 id="database-configuration">Database Configuration</h2>
<p>Controls database monitoring and health checks.</p>
<h3 id="database"><code>database</code></h3>
<p><strong>database.path</strong> (string)
- Description: Database file path
- Example: <code>"/config/researcharr.db"</code></p>
<p><strong>database.monitoring.enabled</strong> (boolean)
- Description: Enable database monitoring
- Default: <code>true</code></p>
<p><strong>database.monitoring.health_check_interval</strong> (integer)
- Description: Health check interval in seconds
- Default: <code>300</code> (5 minutes)
- Minimum: <code>60</code> (1 minute)
- Maximum: <code>3600</code> (1 hour)
- Note: Basic health checks run at this interval</p>
<p><strong>database.monitoring.integrity_check_interval</strong> (integer)
- Description: Full integrity check interval in seconds
- Default: <code>86400</code> (1 day)
- Minimum: <code>3600</code> (1 hour)
- Maximum: <code>604800</code> (1 week)
- Note: Integrity checks are expensive, run infrequently</p>
<p><strong>database.monitoring.size_alert_threshold_mb</strong> (integer)
- Description: Database size alert threshold in MB
- Default: <code>1000</code> (1 GB)
- Minimum: <code>1</code>
- Maximum: <code>100000</code> (100 GB)
- Note: Alert when database exceeds this size</p>
<p><strong>database.monitoring.fragmentation_threshold</strong> (number)
- Description: Fragmentation alert threshold (0-1)
- Default: <code>0.3</code> (30%)
- Minimum: <code>0.0</code>
- Maximum: <code>1.0</code>
- Note: Alert when fragmentation exceeds this percentage</p>
<h3 id="example_2">Example</h3>
<pre><code class="language-yaml">database:
  path: &quot;/config/researcharr.db&quot;
  monitoring:
    enabled: true
    health_check_interval: 300
    integrity_check_interval: 86400
    size_alert_threshold_mb: 1000
    fragmentation_threshold: 0.3
</code></pre>
<h2 id="storage-configuration">Storage Configuration</h2>
<p>Controls storage behavior and database settings.</p>
<h3 id="storage"><code>storage</code></h3>
<p><strong>storage.backup_path</strong> (string)
- Description: Path to backup directory
- Example: <code>"/config/backups"</code></p>
<p><strong>storage.auto_vacuum</strong> (boolean)
- Description: Enable automatic database vacuuming
- Default: <code>true</code>
- Note: Automatically reclaims space from deleted data</p>
<p><strong>storage.wal_mode</strong> (boolean)
- Description: Enable Write-Ahead Logging mode
- Default: <code>true</code>
- Note: Improves concurrency and crash recovery</p>
<h3 id="example_3">Example</h3>
<pre><code class="language-yaml">storage:
  backup_path: &quot;/config/backups&quot;
  auto_vacuum: true
  wal_mode: true
</code></pre>
<h2 id="complete-configuration-example">Complete Configuration Example</h2>
<pre><code class="language-yaml"># Scheduler configuration
scheduling:
  timezone: &quot;America/New_York&quot;
  max_instances: 5
  coalesce: true

# Backup configuration
backups:
  enabled: true
  retain_count: 10
  max_age_days: 7
  check_interval: 3600

# Database configuration
database:
  path: &quot;/config/researcharr.db&quot;
  monitoring:
    enabled: true
    health_check_interval: 300
    integrity_check_interval: 86400
    size_alert_threshold_mb: 1000
    fragmentation_threshold: 0.3

# Storage configuration
storage:
  backup_path: &quot;/config/backups&quot;
  auto_vacuum: true
  wal_mode: true
</code></pre>
<h2 id="validation">Validation</h2>
<p>Use the configuration validator to check configuration:</p>
<pre><code class="language-python">from researcharr.core import validate_config, apply_config_defaults

# Load your config
config = load_config_from_file(&quot;config.yml&quot;)

# Validate
is_valid, errors = validate_config(config)
if not is_valid:
    for error in errors:
        print(f&quot;Error: {error}&quot;)
    sys.exit(1)

# Apply defaults for missing values
config = apply_config_defaults(config)
</code></pre>
<h2 id="environment-variables">Environment Variables</h2>
<p>Configuration can be overridden with environment variables:</p>
<pre><code class="language-bash"># Scheduler
export RESEARCHARR_SCHEDULING_TIMEZONE=&quot;America/New_York&quot;
export RESEARCHARR_SCHEDULING_MAX_INSTANCES=5

# Backups
export RESEARCHARR_BACKUPS_ENABLED=true
export RESEARCHARR_BACKUPS_RETAIN_COUNT=10

# Database
export RESEARCHARR_DATABASE_PATH=&quot;/config/researcharr.db&quot;
export RESEARCHARR_DATABASE_MONITORING_ENABLED=true
</code></pre>
<h2 id="configuration-precedence">Configuration Precedence</h2>
<p>Configuration sources are merged in this order (later overrides earlier):</p>
<ol>
<li>Default values (from schema)</li>
<li>Configuration file (config.yml)</li>
<li>Environment variables</li>
</ol>
<h2 id="dynamic-configuration">Dynamic Configuration</h2>
<p>Some configuration can be changed at runtime:</p>
<pre><code class="language-python">from researcharr.core import get_container

container = get_container()
scheduler = container.resolve(&quot;scheduler_service&quot;)

# Configuration passed during initialization is static
# To change schedule, remove and re-add jobs:
scheduler.remove_job(&quot;my_job&quot;)
scheduler.add_job(my_func, new_trigger, id=&quot;my_job&quot;)
</code></pre>
<h2 id="schema-documentation">Schema Documentation</h2>
<p>Get documentation for all schemas:</p>
<pre><code class="language-python">from researcharr.core import get_validator

validator = get_validator()
print(validator.get_schema_docs())
</code></pre>
<p>Get documentation for specific schema:</p>
<pre><code class="language-python">validator = get_validator()
print(validator.get_schema_docs(&quot;scheduling&quot;))
print(validator.get_schema_docs(&quot;backups&quot;))
print(validator.get_schema_docs(&quot;database&quot;))
print(validator.get_schema_docs(&quot;storage&quot;))
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<p><strong>"Unknown schema" error:</strong>
- Check spelling of configuration section
- Ensure you're using supported sections: <code>scheduling</code>, <code>backups</code>, <code>database</code>, <code>storage</code></p>
<p><strong>"Expected type" error:</strong>
- Check value types match schema (string, integer, boolean)
- Use quotes for strings in YAML
- Don't quote booleans or numbers</p>
<p><strong>"Less than minimum" / "Greater than maximum" error:</strong>
- Check value is within allowed range
- See min/max values in schema above</p>
<p><strong>"Invalid config" at startup:</strong>
- Run config validation separately to see detailed errors
- Check for typos in configuration keys
- Ensure all required fields are present</p>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li><strong>Use defaults</strong>: Only specify values you want to change from defaults</li>
<li><strong>Validate early</strong>: Validate configuration at startup before initializing services</li>
<li><strong>Use version control</strong>: Keep configuration in version control</li>
<li><strong>Document changes</strong>: Comment why non-default values were chosen</li>
<li><strong>Test changes</strong>: Test configuration changes in development first</li>
<li><strong>Monitor thresholds</strong>: Adjust alert thresholds based on your environment</li>
<li><strong>Start conservative</strong>: Use stricter thresholds initially, relax if needed</li>
</ol>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../SERVICES_ARCHITECTURE/">Services Architecture</a></li>
<li><a href="MONITORING.md">Health Monitoring Guide</a></li>
<li><a href="BACKUP_RECOVERY.md">Backup and Recovery</a></li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../CLI-Usage/" class="btn btn-neutral float-left" title="CLI Usage Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Changelog/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../CLI-Usage/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Changelog/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
