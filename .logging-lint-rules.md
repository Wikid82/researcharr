"""Logging best practices linting rules for researcharr.

This file documents dangerous logging patterns that should be avoided and
can be checked with code review or custom linting tools.

## Dangerous Patterns to Avoid

### 1. Direct manipulation of root logger handlers
❌ BAD:
```python
import logging
root = logging.getLogger()
root.handlers.clear()  # Breaks pytest's caplog
```

✅ GOOD:
```python
from researcharr.core.logging import get_logger
logger = get_logger(__name__)
```

### 2. Clearing handlers without preservation
❌ BAD:
```python
logger = logging.getLogger("my_logger")
for handler in logger.handlers:
    logger.removeHandler(handler)
```

✅ GOOD:
```python
from tests.test_utils.logging_helpers import isolated_logger
with isolated_logger("my_logger") as logger:
    # Use logger - cleanup handled automatically
    pass
```

### 3. Using logging.basicConfig in library code
❌ BAD:
```python
import logging
logging.basicConfig(level=logging.DEBUG)  # Affects global state
```

✅ GOOD:
```python
from researcharr.core.logging import configure_root_logger
# Only call this once at application startup, not in library code
configure_root_logger(level=logging.DEBUG)
```

### 4. Direct manipulation of logger.level without restoration
❌ BAD:
```python
logger = logging.getLogger("my_logger")
logger.setLevel(logging.DEBUG)  # No cleanup
```

✅ GOOD:
```python
from tests.test_utils.logging_helpers import isolated_logger
with isolated_logger("my_logger", level=logging.DEBUG) as logger:
    # Level will be restored after block
    pass
```

### 5. Adding handlers without checking for duplicates
❌ BAD:
```python
handler = logging.FileHandler("app.log")
logger.addHandler(handler)  # May add duplicate
```

✅ GOOD:
```python
from researcharr.core.logging import get_logger
logger = get_logger(__name__, log_file="app.log")
# Factory handles duplicate prevention
```

## Grep Patterns for Code Review

Search for these patterns in PRs:

```bash
# Direct root logger manipulation
git grep -n "logging.getLogger()" | grep -v "get_logger"

# Handler clearing
git grep -n "\.handlers\.clear()"
git grep -n "\.removeHandler"

# basicConfig usage
git grep -n "logging.basicConfig"

# Level modification
git grep -n "\.setLevel" | grep -v "handler\.setLevel"
```

## Automated Checking

Add to pre-commit hooks or CI:

```yaml
# .pre-commit-config.yaml
- repo: local
  hooks:
    - id: check-logging-patterns
      name: Check dangerous logging patterns
      entry: bash -c 'git grep -n "logging\.basicConfig" && exit 1 || exit 0'
      language: system
      pass_filenames: false
```
"""
