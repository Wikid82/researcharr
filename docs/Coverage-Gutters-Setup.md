# Coverage Gutters Setup

This project is configured to work with the [Coverage Gutters](https://marketplace.visualstudio.com/items?itemName=ryanluker.vscode-coverage-gutters) VS Code extension.

## Quick Start

1. **Install the Extension** (if not already installed):
   - Search for "Coverage Gutters" in VS Code Extensions
   - Or install via CLI: `code --install-extension ryanluker.vscode-coverage-gutters`

2. **Generate Coverage**:
   - Run tests via the test task: `Ctrl+Shift+P` → "Tasks: Run Test Task"
   - Or manually: `python -m pytest tests/ --cov=. --cov-report=xml`
   - This creates `coverage.xml` in the project root

3. **View Coverage in Editor**:
   - Click "Watch" in the VS Code status bar (bottom), or
   - Use command palette: `Coverage Gutters: Display Coverage`
   - Green/red indicators will appear in the gutter and on lines

4. **Preview HTML Report**:
   - Command: `Coverage Gutters: Preview Coverage Report`
   - Opens `htmlcov/index.html` in browser

## Configuration

The project is pre-configured with:

- **Coverage file**: `coverage.xml` (auto-generated by pytest)
- **HTML report**: `htmlcov/index.html`
- **Gutter icons**: Green (covered), Red (uncovered), Yellow (partial)
- **Line highlighting**: Enabled with subtle colors

### VS Code Tasks

Use `Ctrl+Shift+P` → "Tasks: Run Task":

- **Run Tests with Coverage** (default test task) - Full suite with coverage
- **Run Tests (Quick)** - Fast run without coverage
- **Run Current Test File with Coverage** - Test only the open file

## Extension Features

### Visual Indicators

- **Gutter icons**: Green/red/yellow bars in the left margin
- **Line highlighting**: Background colors on code lines
- **Ruler marks**: Small colored marks in the scrollbar

### Commands

Access via `Ctrl+Shift+P`:

- `Coverage Gutters: Display Coverage` - Show coverage
- `Coverage Gutters: Watch` - Auto-refresh when coverage file changes
- `Coverage Gutters: Remove Coverage` - Hide coverage
- `Coverage Gutters: Preview Coverage Report` - Open HTML report

### Status Bar

Click the coverage indicator in the bottom status bar to toggle coverage display.

## Tips

1. **Enable Watch Mode**: Click "Watch" so coverage updates automatically after running tests
2. **Focus on Files**: The extension shows coverage for the currently open file
3. **Multiple Formats**: Configured to look for `coverage.xml`, `cov.xml`, and `lcov.info`
4. **HTML Reports**: Use the preview command to see full detailed coverage tables

## Troubleshooting

If coverage doesn't appear:

1. Ensure `coverage.xml` exists in the project root
2. Click "Watch" in the status bar
3. Try `Coverage Gutters: Display Coverage` command
4. Check the Output panel (select "Coverage Gutters" from dropdown)

## Color Customization

Edit `.vscode/settings.json` to customize highlight colors:

```json
{
  "coverage-gutters.highlightdark": "rgba(20, 200, 20, 0.3)",      // Green for covered
  "coverage-gutters.noHighlightDark": "rgba(200, 20, 20, 0.3)",    // Red for uncovered
  "coverage-gutters.partialHighlightDark": "rgba(200, 200, 20, 0.3)" // Yellow for partial
}
```

## References

- [Extension Documentation](https://github.com/ryanluker/vscode-coverage-gutters)
- [Python Example](https://github.com/ryanluker/vscode-coverage-gutters/tree/main/example/python)
- [Our Coverage Config](./pyproject.toml) - See `[tool.coverage.*]` sections
